{% extends "./main.html" %}

{% load static%}

{% block title %}Despesas{% endblock %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    {% block scripts %}
    <link href="https://cdn.datatables.net/v/dt/jq-3.7.0/jszip-3.10.1/dt-1.13.6/b-2.4.1/b-colvis-2.4.1/b-html5-2.4.1/b-print-2.4.1/cr-1.7.0/date-1.5.1/r-2.5.0/rr-1.4.1/sc-2.2.0/sb-1.5.0/sp-2.2.0/sl-1.7.0/sr-1.3.0/datatables.min.css" rel="stylesheet">
 
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/v/dt/jq-3.7.0/jszip-3.10.1/dt-1.13.6/b-2.4.1/b-colvis-2.4.1/b-html5-2.4.1/b-print-2.4.1/cr-1.7.0/date-1.5.1/r-2.5.0/rr-1.4.1/sc-2.2.0/sb-1.5.0/sp-2.2.0/sl-1.7.0/sr-1.3.0/datatables.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/list_person.css' %}">
    <script src="{% static 'js/list_invoice.js' %}"></script>

    {% endblock %}
    <title>Despesas</title>
</head>
<body>
    {% block body %}
        <div class="container-fluid">
            <div class="bg-primary box">
                <div class="row">
                    <h1 class="text-light">Despesas</h1>
                </div>
                <hr width="100" class="w-100">
                <div class="row">
                    <a href="{% url 'new_invoice' %}" class="btn btn-warning">Cadastrar Lançamento</a>
                </div>
                <hr width="100" class="w-100">
                <div class="row bg-light p-3" style="border-radius: 5px;">
                    <table id="table" class="table bg-light text-dark">
                        <thead>
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Tipo</th>
                                <th scope="col">Valor</th>
                                <th scope="col">Fornecedor</th>
                                <th scope="col">Lançamento</th>
                                <th scope="col">Pagamento</th>
                                <th>A pagar?</th>
                                <th scope="col">Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for i in invoice_list %}
                            <tr>
                                <td>{{i.invoice_type.number}}</th>
                                <td>{{i.invoice_type.name}}</td>
                                <td>R${{i.cost}}</td>
                                <td>{{i.supplier}}</td>
                                <td>{{i.release_date|date:'d/m/Y'}}</td>
                                <td>{{i.payment_date|date:'d/m/Y'}}</td>
                                <td>{% if i.paid %} Não {%else %} Sim {% endif %}</td>
                                <td>
                                    <a href="{% url 'view_invoice' i.pk %}"><i class="fa-solid fa-eye"></i></a>
                                    <a href="{% url 'edit_invoice' i.pk %}"><i class="fa fa-pencil" aria-hidden="true"></i></a>
                                    <a href="#" i_pk="{{i.pk}}" onclick="deleteInvoice(this)"><i class="fa fa-trash" aria-hidden="true"></i></a>
                                    <form hidden id="deleteForm-{{i.pk}}" action="{% url 'view_invoice' i.pk %}" method="post"> 
                                        {% csrf_token %}
                                        <input type="text" name="pk" id="pk" value="{{i.pk}}">
                                    </form>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    {% endblock %}
</body>
</html>